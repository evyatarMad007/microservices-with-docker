{"ast":null,"code":"var _jsxFileName = \"C:\\\\GitHub\\\\employee-managment-system\\\\frontend\\\\src\\\\screens\\\\ResetPassword.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport PageHeader from '../components/PageHeader';\nimport LanguageButton from '../components/LanguageButton';\nimport personImg from '../images/sign-in-img.png';\nimport { formValidationHandler } from '../utils/validate';\nimport { getCurrentUser } from '../services/userService';\nimport { updateNewUserPassword } from '../services/userHelperService';\nimport { toast } from 'react-toastify';\nimport MoonLoader from \"react-spinners/MoonLoader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ResetPassword = () => {\n  _s();\n\n  // component Language \n  const [leng, setLeng] = useState(localStorage.getItem('Language') || 'en');\n\n  const checkLanguage = lengProps => {\n    setLeng(lengProps);\n  };\n\n  const [jwtStatus, setJwtStatus] = useState(false);\n  const [loader, setLoader] = useState(false); // form value & valid stats\n\n  const [password, setPassword] = useState({});\n  const [confirmPassword, setConfirmPassword] = useState({}); // general settings stats\n\n  const [passwordLabel, setPasswordLabel] = useState(true);\n  const [showPassword, setShowPassword] = useState(false);\n  const [confirmPasswordLabel, setConfirmPasswordLabel] = useState(true);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n\n  const inputBlurHandler = (inp, value) => {\n    if (value.length === 0 || value === 'DEFAULT') {\n      if (inp === 'password') {\n        setPasswordLabel(true);\n        if (password.error) setPassword(password.error = '');\n      }\n\n      if (inp === 'confirmPassword') {\n        setConfirmPasswordLabel(true);\n        if (confirmPassword.error) setConfirmPassword(confirmPassword.error = '');\n      }\n    }\n  };\n\n  const validateHandler = (inp, value) => {\n    let setTheState;\n    const errorValidate = formValidationHandler(inp, value); // password: \n\n    if (inp === 'password') {\n      if (!errorValidate) {\n        setTheState = {\n          type: inp,\n          isValid: true,\n          value,\n          error: errorValidate\n        };\n      } else {\n        setTheState = {\n          type: inp,\n          isValid: false,\n          value,\n          error: errorValidate\n        };\n      }\n\n      setPassword(setTheState);\n    } // confirm password: \n\n\n    if (inp === 'confirmPassword') {\n      if (!errorValidate) {\n        setTheState = {\n          type: inp,\n          isValid: true,\n          value,\n          error: errorValidate\n        };\n      } else {\n        setTheState = {\n          type: inp,\n          isValid: false,\n          value,\n          error: errorValidate\n        };\n      }\n\n      setConfirmPassword(setTheState);\n    }\n  };\n\n  useEffect(() => {\n    let token = window.location.pathname.split('/')[3];\n    updateNewUserPassword('', token).then(res => {\n      if (res === 'jwt expired') setJwtStatus(true); // if( res === 'empty value' ) console.log('password empty - please send data...');\n      // console.log(res);\n    });\n  }, []);\n  if (getCurrentUser()) return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 35\n  }, this);\n  if (jwtStatus) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `reset-password  reset-password-${leng}`,\n    children: leng === 'en' ? /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"jwtExpired\",\n      style: {\n        textAlign: 'left'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u274C Sorry, this link has expired.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 43\n      }, this), \"This link is only valid for 10 minutes. \\u231B\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 43\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 49\n      }, this), \"Go to the Password Reset page:\", /*#__PURE__*/_jsxDEV(Link, {\n        className: \"link-forgot-pass\",\n        to: \"/forgot-password\",\n        children: \" Click Here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 38\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 35\n    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"jwtExpired\",\n      style: {\n        textAlign: 'right'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u05DE\\u05E6\\u05D8\\u05E2\\u05E8\\u05D9\\u05DD \\u05E4\\u05D2 \\u05EA\\u05D5\\u05E7\\u05E4\\u05D5 \\u05E9\\u05DC \\u05E7\\u05D9\\u05E9\\u05D5\\u05E8 \\u05D6\\u05D4. \\u274C \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 43\n      }, this), \"\\u05E7\\u05D9\\u05E9\\u05D5\\u05E8 \\u05D6\\u05D4 \\u05EA\\u05E7\\u05E3 \\u05DC-10 \\u05D3\\u05E7\\u05D5\\u05EA \\u05D1\\u05DC\\u05D1\\u05D3. \\u231B\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 37\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 43\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 49\n      }, this), \"\\u05DC\\u05DE\\u05E2\\u05D1\\u05E8 \\u05DC\\u05D3\\u05E3 \\u05D0\\u05D9\\u05E4\\u05D5\\u05E1 \\u05E1\\u05D9\\u05E1\\u05DE\\u05D4\", /*#__PURE__*/_jsxDEV(Link, {\n        className: \"link-forgot-pass\",\n        to: \"/forgot-password\",\n        children: \" \\u05DC\\u05D7\\u05E5 \\u05DB\\u05D0\\u05DF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 38\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 35\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `reset-password  reset-password-${leng}`,\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      children: leng === 'en' ? 'Enter a new password' : 'הכנס סיסמא חדשה'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(LanguageButton, {\n      checkLanguage: checkLanguage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 25\n    }, this), loader && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"full-screen-loader\",\n      children: [/*#__PURE__*/_jsxDEV(MoonLoader, {\n        size: 70,\n        color: \"#ffffff\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }, this), localStorage.getItem('Language') === 'en' ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'white'\n        },\n        children: \"Please Wait...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 39\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'white'\n        },\n        children: \"\\u05D0\\u05E0\\u05D0 \\u05D4\\u05DE\\u05EA\\u05DF...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 39\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 36\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"reset-password__form\",\n      onSubmit: e => {\n        e.preventDefault();\n        setLoader(true);\n        let token = window.location.pathname.split('/')[3];\n        updateNewUserPassword(password.value, token).then(res => {\n          setLoader(false);\n\n          if (res.message === 'OK') {\n            if (localStorage.getItem('Language') === 'en') toast.success('Password updated successfully!');\n            if (localStorage.getItem('Language') === 'he') toast.success('!הסיסמה עודכנה בהצלחה');\n            setTimeout(() => {\n              window.location = '/';\n            }, 2000);\n          }\n        });\n      },\n      autoComplete: \"off\",\n      noValidate: true,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"person-img-box\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"person-img\",\n          src: personImg,\n          alt: \"person-img\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: passwordLabel ? 'label-focus' : '',\n          htmlFor: \"password\",\n          children: leng === 'en' ? 'Password' : 'סיסמה'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onBlur: e => inputBlurHandler('password', e.target.value),\n          onFocus: () => setPasswordLabel(false),\n          type: showPassword ? 'text' : 'password',\n          autoComplete: \"on\",\n          name: \"password\",\n          onChange: e => validateHandler(\"password\", e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 29\n        }, this), password.error && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-valid\",\n          children: leng === 'en' ? `${password.error}` : `הסיסמה חייבת להיות: 6-20 תווים, אותיות גדולות וקטנות באנגלית ומספר`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 48\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"show-password\",\n          onClick: () => setShowPassword(!showPassword),\n          children: showPassword ? /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"far fa-eye-slash\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 45\n          }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"far fa-eye\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 84\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: confirmPasswordLabel ? 'label-focus' : '',\n          htmlFor: \"confirmPassword\",\n          children: leng === 'en' ? 'Retype Password' : 'אמת סיסמה'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onBlur: e => inputBlurHandler('confirmPassword', e.target.value),\n          onFocus: () => setConfirmPasswordLabel(false),\n          type: showConfirmPassword ? 'text' : 'Password',\n          autoComplete: \"on\",\n          name: \"confirmPassword\",\n          onChange: e => validateHandler(\"confirmPassword\", e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 29\n        }, this), confirmPassword.error && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-valid\",\n          children: leng === 'en' ? `${confirmPassword.error}` : `הסיסמה חייבת להיות: 6-20 תווים, אותיות גדולות וקטנות באנגלית ומספר`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 55\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"show-password\",\n          onClick: () => setShowConfirmPassword(!showConfirmPassword),\n          children: showConfirmPassword ? /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"far fa-eye-slash\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 52\n          }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"far fa-eye\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 91\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-bottom\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"password-match-error\",\n            children: password.isValid && confirmPassword.isValid ? password.value === confirmPassword.value ? '' : leng === 'en' ? 'Passwords do not match' : 'הסיסמאות לא תואמות' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"submit\",\n            type: \"submit\",\n            disabled: password.isValid && confirmPassword.isValid ? password.value === confirmPassword.value ? false : true : true,\n            children: leng === 'en' ? 'Save ' : 'שמור'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ResetPassword, \"vdvsJc1OZ119M36TkFEguDHhjkE=\");\n\n_c = ResetPassword;\nexport default ResetPassword;\n\nvar _c;\n\n$RefreshReg$(_c, \"ResetPassword\");","map":{"version":3,"sources":["C:/GitHub/employee-managment-system/frontend/src/screens/ResetPassword.jsx"],"names":["React","useState","useEffect","Link","Redirect","PageHeader","LanguageButton","personImg","formValidationHandler","getCurrentUser","updateNewUserPassword","toast","MoonLoader","ResetPassword","leng","setLeng","localStorage","getItem","checkLanguage","lengProps","jwtStatus","setJwtStatus","loader","setLoader","password","setPassword","confirmPassword","setConfirmPassword","passwordLabel","setPasswordLabel","showPassword","setShowPassword","confirmPasswordLabel","setConfirmPasswordLabel","showConfirmPassword","setShowConfirmPassword","inputBlurHandler","inp","value","length","error","validateHandler","setTheState","errorValidate","type","isValid","token","window","location","pathname","split","then","res","textAlign","color","e","preventDefault","message","success","setTimeout","target"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from 'react'\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport PageHeader from '../components/PageHeader'\r\nimport LanguageButton from '../components/LanguageButton'\r\nimport personImg from '../images/sign-in-img.png'\r\nimport {formValidationHandler} from '../utils/validate'\r\nimport {getCurrentUser} from '../services/userService'\r\nimport {updateNewUserPassword} from '../services/userHelperService'\r\nimport {toast} from 'react-toastify'\r\nimport MoonLoader from \"react-spinners/MoonLoader\";\r\n\r\n\r\nconst ResetPassword = () => {\r\n\r\n    // component Language \r\n    const [leng, setLeng] = useState(localStorage.getItem('Language') || 'en')\r\n\r\n    const checkLanguage = (lengProps) => {\r\n        setLeng(lengProps)\r\n    }\r\n    const [jwtStatus, setJwtStatus] = useState(false)\r\n\r\n    const [loader, setLoader] = useState(false)\r\n\r\n    // form value & valid stats\r\n    const [password, setPassword] = useState({})\r\n    const [confirmPassword, setConfirmPassword] = useState({})\r\n\r\n     // general settings stats\r\n     const [passwordLabel, setPasswordLabel] = useState(true)\r\n     const [showPassword, setShowPassword] = useState(false)\r\n     const [confirmPasswordLabel, setConfirmPasswordLabel] = useState(true)\r\n     const [showConfirmPassword, setShowConfirmPassword] = useState(false)\r\n\r\n    const inputBlurHandler = (inp,value) => {\r\n        if( value.length === 0 || value === 'DEFAULT') {\r\n            if(inp === 'password'){ \r\n                setPasswordLabel(true)\r\n                if(password.error) setPassword(password.error = '')\r\n            }\r\n            if(inp === 'confirmPassword'){ \r\n                setConfirmPasswordLabel(true)\r\n                if(confirmPassword.error) setConfirmPassword(confirmPassword.error = '')\r\n            }\r\n        }\r\n    }\r\n\r\n    const validateHandler = (inp, value) => {\r\n        let setTheState;\r\n        const errorValidate = formValidationHandler(inp, value);\r\n        // password: \r\n        if( inp === 'password' ) {\r\n            if(! errorValidate) {\r\n                setTheState = { type: inp, isValid: true, value, error: errorValidate}\r\n                \r\n            }  else {\r\n                setTheState = { type: inp, isValid: false, value, error: errorValidate }\r\n            }\r\n            setPassword(setTheState)\r\n        } \r\n        // confirm password: \r\n        if( inp === 'confirmPassword' ) {\r\n            if(! errorValidate) {\r\n                setTheState = { type: inp, isValid: true, value, error: errorValidate}\r\n            }  else {\r\n                setTheState = { type: inp, isValid: false, value, error: errorValidate }\r\n            }\r\n            setConfirmPassword(setTheState)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        let token = window.location.pathname.split('/')[3]\r\n        updateNewUserPassword('', token)\r\n        .then( res => {\r\n            if( res === 'jwt expired' ) setJwtStatus(true)\r\n            // if( res === 'empty value' ) console.log('password empty - please send data...');\r\n\r\n            // console.log(res);\r\n        })\r\n    }, [])\r\n\r\n\r\n\r\n    if( getCurrentUser() ) return <Redirect to=\"/\"/>   \r\n\r\n    \r\n    if( jwtStatus ) return (\r\n                        <div className={`reset-password  reset-password-${leng}`}>\r\n                            {leng === 'en'\r\n                                ? <span className=\"jwtExpired\" style={{ textAlign: 'left'}}>\r\n                                    <h3>❌ Sorry, this link has expired.</h3>\r\n                                    <br /><br />\r\n                                    This link is only valid for 10 minutes. ⌛\r\n                                    <br /><br /><br />\r\n                                    Go to the Password Reset page: \r\n                                     <Link \r\n                                        className=\"link-forgot-pass\" \r\n                                        to=\"/forgot-password\"\r\n                                    > Click Here\r\n                                    </Link>\r\n                                  </span>\r\n                                : <span className=\"jwtExpired\" style={{ textAlign: 'right' }}>\r\n                                    <h3>מצטערים פג תוקפו של קישור זה. ❌ </h3>\r\n                                    <br /><br />\r\n                                    קישור זה תקף ל-10 דקות בלבד. ⌛\r\n                                    <br /><br /><br />\r\n                                     למעבר לדף איפוס סיסמה\r\n                                     <Link \r\n                                        className=\"link-forgot-pass\" \r\n                                        to=\"/forgot-password\"\r\n                                    > לחץ כאן\r\n                                    </Link>\r\n                                  </span>\r\n                            }\r\n                        </div>\r\n                    )\r\n    return (\r\n        \r\n        <div className={`reset-password  reset-password-${leng}`}>\r\n\r\n                        <PageHeader>{ leng === 'en' ? 'Enter a new password' : 'הכנס סיסמא חדשה' }</PageHeader>\r\n\r\n                        <LanguageButton checkLanguage={checkLanguage} />\r\n                        \r\n                        {loader && <div className=\"full-screen-loader\">\r\n                            <MoonLoader size={70} color='#ffffff'/>\r\n                            {localStorage.getItem('Language') === 'en' \r\n                                    ? <p style={{ color: 'white' }}>Please Wait...</p>\r\n                                    : <p style={{ color: 'white' }}>אנא המתן...</p>\r\n                            }\r\n                            \r\n                            \r\n                        </div>}\r\n                        \r\n                        <form \r\n                            className=\"reset-password__form\" \r\n                            onSubmit={ (e) =>  {\r\n                                e.preventDefault()\r\n                                setLoader(true)\r\n                                let token = window.location.pathname.split('/')[3]\r\n                                updateNewUserPassword(password.value, token)\r\n                                .then( res => {\r\n                                    setLoader(false)\r\n                                    if( res.message === 'OK' ) {\r\n                                        if( localStorage.getItem('Language') === 'en' )  toast.success('Password updated successfully!')\r\n                                        if( localStorage.getItem('Language') === 'he' )  toast.success('!הסיסמה עודכנה בהצלחה')\r\n                                        setTimeout(() => {\r\n                                            window.location = '/'\r\n                                        }, 2000);\r\n                                    }\r\n                                })\r\n                                \r\n                            }}\r\n                            autoComplete=\"off\" noValidate\r\n                        >\r\n                            <div className=\"person-img-box\">\r\n                                <img className=\"person-img\" src={personImg} alt=\"person-img\" />\r\n                            </div>\r\n                            \r\n                            <div className=\"input-wrapper\">\r\n                            <label className={passwordLabel ? 'label-focus' : ''} htmlFor=\"password\">{ leng === 'en' ? 'Password' : 'סיסמה' }</label>\r\n                            <input \r\n                                onBlur={ (e) => inputBlurHandler('password',e.target.value)} \r\n                                onFocus={ () => setPasswordLabel(false)} \r\n                                type={ showPassword ? 'text' : 'password'}  \r\n                                autoComplete=\"on\" name=\"password\" \r\n                                onChange={ e => validateHandler(\"password\", e.target.value)} \r\n                            />\r\n                            {password.error && <span className=\"error-valid\">{ leng === 'en' ? `${password.error}` : `הסיסמה חייבת להיות: 6-20 תווים, אותיות גדולות וקטנות באנגלית ומספר` }</span>}\r\n                            <span className=\"show-password\" onClick={ () => setShowPassword( ! showPassword )}>\r\n                            {showPassword ? <i className=\"far fa-eye-slash\"></i> : <i className=\"far fa-eye\"></i>}\r\n                            </span>\r\n                        </div>\r\n        \r\n                        <div className=\"input-wrapper\">\r\n                            <label className={confirmPasswordLabel ? 'label-focus' : ''} htmlFor=\"confirmPassword\">{ leng === 'en' ? 'Retype Password' : 'אמת סיסמה' }</label>\r\n                            <input \r\n                                onBlur={ (e) => inputBlurHandler('confirmPassword',e.target.value)} \r\n                                onFocus={ () => setConfirmPasswordLabel(false)} \r\n                                type={ showConfirmPassword ? 'text' : 'Password'}  \r\n                                autoComplete=\"on\" name=\"confirmPassword\" \r\n                                onChange={ e => validateHandler(\"confirmPassword\", e.target.value)} \r\n                            />\r\n                            {confirmPassword.error && <span className=\"error-valid\">{ leng === 'en' ? `${confirmPassword.error}` : `הסיסמה חייבת להיות: 6-20 תווים, אותיות גדולות וקטנות באנגלית ומספר` }</span>}\r\n                            <span className=\"show-password\" onClick={ () => setShowConfirmPassword( ! showConfirmPassword )}>\r\n                            {showConfirmPassword ? <i className=\"far fa-eye-slash\"></i> : <i className=\"far fa-eye\"></i>}\r\n                            </span>\r\n                        </div>\r\n\r\n                            <div className=\"form-bottom\">\r\n                                <div className=\"button-wrapper\">\r\n                                    <p className=\"password-match-error\">\r\n                                    {\r\n                                    password.isValid  && confirmPassword.isValid \r\n                                        ? password.value === confirmPassword.value\r\n                                            ? ''\r\n                                            : leng === 'en' ? 'Passwords do not match' : 'הסיסמאות לא תואמות' \r\n                                        : ''\r\n                                    }</p> \r\n\r\n                                    <button \r\n                                        className=\"submit\" \r\n                                        type=\"submit\" \r\n                                        disabled={\r\n                                            password.isValid && confirmPassword.isValid\r\n                                             ? password.value === confirmPassword.value \r\n                                                ? false \r\n                                                : true\r\n                                             : true\r\n                                        }\r\n                                        >{ leng === 'en' ? 'Save ' : 'שמור' }\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n    )\r\n}\r\n\r\nexport default ResetPassword\r\n"]},"metadata":{},"sourceType":"module"}