{"ast":null,"code":"var _jsxFileName = \"C:\\\\GitHub\\\\employee-managment-system\\\\frontend\\\\src\\\\screens\\\\AdminPanel.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport PageHeader from '../components/PageHeader';\nimport LanguageButton from '../components/LanguageButton';\nimport personImg from '../images/manager-img.png';\nimport { getAllUsers, userPermissions } from '../services/AdminService';\nimport { getCurrentUser } from '../services/userService';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AdminPanel = () => {\n  _s();\n\n  // component Language \n  const [leng, setLeng] = useState(localStorage.getItem('Language') || 'en');\n\n  const checkLanguage = lengProps => {\n    setLeng(lengProps);\n  }; // all users list. \n\n\n  const [allUsers, setAllUsers] = useState([]); // form value & valid stats\n\n  const [userSelect, setUserSelect] = useState({});\n  const [authSelect, setAuthSelect] = useState({}); // const [reset, setReset] = useState(false) \n  // general settings stats\n\n  const [userSelectLabel, setUserSelectLabel] = useState(true);\n  const [authSelectLabel, setAuthSelectLabel] = useState(true); // [GET] get all users from server.\n\n  useEffect(() => {\n    getAllUsers().then(users => setAllUsers(users));\n  }, []);\n\n  const inputBlurHandler = (inp, value) => {\n    if (value.length === 0 || value === 'DEFAULT') {\n      if (inp === 'userSelect') {\n        setUserSelectLabel(true);\n        if (userSelect.error) setUserSelect(userSelect.error = '');\n      }\n\n      if (inp === 'authSelect') {\n        setAuthSelectLabel(true);\n        if (authSelect.error) setAuthSelect(authSelect.error = '');\n      }\n    }\n  };\n\n  const validateHandler = (inp, value) => {\n    let setTheState; // const errorValidate = formValidationHandler(inp, value);\n\n    if (inp === 'userSelect') {\n      if (value.length <= 0 || value === 'DEFAULT') {\n        setTheState = {\n          type: inp,\n          isValid: false,\n          value,\n          error: 'Select an Option'\n        };\n      } else {\n        setTheState = {\n          type: inp,\n          isValid: true,\n          value,\n          error: ''\n        };\n      }\n\n      setUserSelect(setTheState);\n    }\n\n    if (inp === 'authSelect') {\n      if (value.length <= 0 || value === 'DEFAULT') {\n        setTheState = {\n          type: inp,\n          isValid: false,\n          value,\n          error: 'Select an Option'\n        };\n      } else {\n        setTheState = {\n          type: inp,\n          isValid: true,\n          value,\n          error: ''\n        };\n      }\n\n      setAuthSelect(setTheState);\n    }\n  }; // const checkLanguage = (lengProps) => {\n  //     setLeng(lengProps)\n  // }\n\n\n  ILL8;\n  if (!getCurrentUser().userData.isAdmin === true) return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 63\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `admin-panel  admin-panel-${leng}`,\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      children: leng === 'en' ? 'Admin Panel' : 'פאנל ניהול'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(LanguageButton, {\n      checkLanguage: checkLanguage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"admin-panel__form\",\n      onSubmit: e => {\n        e.preventDefault();\n        userPermissions(userSelect.value, authSelect.value); // Send an indication to the user\n\n        if (localStorage.getItem('Language') === 'en') toast.success('User permissions updated.');\n        if (localStorage.getItem('Language') === 'he') toast.success('הרשאות משתמש עודכנו.');\n      },\n      autoComplete: \"off\",\n      noValidate: true,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"person-img-box\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"person-img\",\n          src: personImg,\n          alt: \"person-img\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"group-title\",\n        children: leng === 'en' ? 'Set User Permissions' : 'הגדר הרשאות משתמש'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: userSelectLabel ? 'label-focus' : '',\n          htmlFor: \"userSelect\",\n          children: leng === 'en' ? 'User' : 'משתמש'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"userSelect-select\",\n          name: \"userSelect\",\n          onBlur: e => inputBlurHandler('userSelect', e.target.value),\n          onFocus: () => setUserSelectLabel(false),\n          onClick: e => validateHandler(\"userSelect\", e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            className: \"option\",\n            value: \"DEFAULT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 21\n          }, this), allUsers && allUsers.map((user, inx) => /*#__PURE__*/_jsxDEV(\"option\", {\n            className: \"option\",\n            value: user.email,\n            children: user.email\n          }, inx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 68\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }, this), userSelect.error && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-valid\",\n          children: leng === 'en' ? `${userSelect.error}` : 'בחר אפשרות'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: authSelectLabel ? 'label-focus' : '',\n          htmlFor: \"authSelect\",\n          children: leng === 'en' ? 'Permission' : 'הרשאות'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"authSelect-select\",\n          name: \"authSelect\",\n          onBlur: e => inputBlurHandler('authSelect', e.target.value),\n          onFocus: () => setAuthSelectLabel(false),\n          onClick: e => validateHandler(\"authSelect\", e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            className: \"option\",\n            value: \"DEFAULT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            className: \"option\",\n            value: \"Basic\",\n            children: \"Basic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            className: \"option\",\n            value: \"Editor\",\n            children: \"Editor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            className: \"option\",\n            value: \"Administrator\",\n            children: \"Administrator\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }, this), authSelect.error && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-valid\",\n          children: leng === 'en' ? `${authSelect.error}` : 'בחר אפשרות'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 38\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"submit\",\n          type: \"submit\",\n          disabled: userSelect.isValid && authSelect.isValid ? false : true,\n          children: leng === 'en' ? 'Save' : 'שמור'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AdminPanel, \"gHoyXfUNjxpok4g4xAzDxkqPvuM=\");\n\n_c = AdminPanel;\nexport default AdminPanel;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminPanel\");","map":{"version":3,"sources":["C:/GitHub/employee-managment-system/frontend/src/screens/AdminPanel.jsx"],"names":["React","useState","useEffect","Redirect","PageHeader","LanguageButton","personImg","getAllUsers","userPermissions","getCurrentUser","toast","AdminPanel","leng","setLeng","localStorage","getItem","checkLanguage","lengProps","allUsers","setAllUsers","userSelect","setUserSelect","authSelect","setAuthSelect","userSelectLabel","setUserSelectLabel","authSelectLabel","setAuthSelectLabel","then","users","inputBlurHandler","inp","value","length","error","validateHandler","setTheState","type","isValid","ILL8","userData","isAdmin","e","preventDefault","success","target","map","user","inx","email"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport PageHeader from '../components/PageHeader'\r\nimport LanguageButton from '../components/LanguageButton'\r\nimport personImg from '../images/manager-img.png'\r\nimport { getAllUsers, userPermissions } from '../services/AdminService'\r\nimport {getCurrentUser} from '../services/userService'\r\nimport {toast} from 'react-toastify'\r\n\r\nconst AdminPanel = () => {\r\n\r\n    // component Language \r\n    const [leng, setLeng] = useState(localStorage.getItem('Language') || 'en')\r\n\r\n    const checkLanguage = (lengProps) => {\r\n        setLeng(lengProps)\r\n    }\r\n\r\n\r\n    // all users list. \r\n    const [allUsers, setAllUsers] = useState([])\r\n\r\n    // form value & valid stats\r\n    const [userSelect, setUserSelect] = useState({})\r\n    const [authSelect, setAuthSelect] = useState({})\r\n\r\n    // const [reset, setReset] = useState(false) \r\n\r\n    // general settings stats\r\n    const [userSelectLabel, setUserSelectLabel] = useState(true)\r\n    const [authSelectLabel, setAuthSelectLabel] = useState(true)\r\n\r\n    // [GET] get all users from server.\r\n    useEffect(() => {\r\n        getAllUsers()\r\n        .then(users => setAllUsers(users))\r\n    },[])\r\n\r\n\r\n\r\n    const inputBlurHandler = (inp,value) => {\r\n        if( value.length === 0 || value === 'DEFAULT') {\r\n\r\n            if(inp === 'userSelect') {\r\n                setUserSelectLabel(true)\r\n                if(userSelect.error) setUserSelect(userSelect.error = '')\r\n            }\r\n            if(inp === 'authSelect') {\r\n                setAuthSelectLabel(true)\r\n                if(authSelect.error) setAuthSelect(authSelect.error = '')\r\n            }\r\n        }\r\n    }\r\n\r\n    const validateHandler = (inp, value) => {\r\n        let setTheState;\r\n        // const errorValidate = formValidationHandler(inp, value);\r\n        \r\n        if( inp === 'userSelect'  ) {\r\n            if(  value.length <= 0 ||  value === 'DEFAULT') {\r\n                setTheState = { type: inp, isValid: false, value, error: 'Select an Option'}\r\n            } else {\r\n                setTheState = { type: inp, isValid: true, value, error: ''}\r\n            }\r\n            setUserSelect(setTheState)\r\n        }\r\n        if( inp === 'authSelect'  ) {\r\n            if( value.length <= 0 ||  value === 'DEFAULT' ) {\r\n                setTheState = { type: inp, isValid: false, value, error: 'Select an Option'}\r\n            } else {\r\n                setTheState = { type: inp, isValid: true, value, error: ''}\r\n                \r\n            }\r\n            setAuthSelect(setTheState)\r\n        }\r\n    }\r\n\r\n    // const checkLanguage = (lengProps) => {\r\n    //     setLeng(lengProps)\r\n    // }\r\n\r\nILL8\r\n\r\n    if( ! getCurrentUser().userData.isAdmin === true ) return <Redirect to=\"/\"/>      \r\n\r\n    return (\r\n        <div className={`admin-panel  admin-panel-${leng}`}>\r\n        <PageHeader>{ leng === 'en' ? 'Admin Panel' : 'פאנל ניהול' }</PageHeader>\r\n\r\n        <LanguageButton checkLanguage={checkLanguage} />\r\n        <form \r\n            className=\"admin-panel__form\" \r\n            onSubmit={ (e) =>  {\r\n                e.preventDefault()\r\n                    userPermissions(\r\n                        userSelect.value,\r\n                        authSelect.value\r\n                    )\r\n                    // Send an indication to the user\r\n                    if( localStorage.getItem('Language') === 'en' )  toast.success('User permissions updated.')\r\n                    if( localStorage.getItem('Language') === 'he' )  toast.success('הרשאות משתמש עודכנו.')\r\n            }} \r\n            autoComplete=\"off\" noValidate\r\n            >\r\n            <div className=\"person-img-box\">\r\n                <img className=\"person-img\" src={personImg} alt=\"person-img\" />\r\n            </div>\r\n            \r\n            <span className='group-title'>{ leng === 'en' ? 'Set User Permissions' : 'הגדר הרשאות משתמש' }</span>\r\n            <div className=\"input-wrapper\">\r\n                <label className={userSelectLabel ? 'label-focus' : ''} htmlFor=\"userSelect\">{ leng === 'en' ? 'User' : 'משתמש' }</label>\r\n                <select \r\n                    className=\"userSelect-select\" name=\"userSelect\"\r\n                    onBlur={ (e) => inputBlurHandler('userSelect',e.target.value)}\r\n                    onFocus={ () => setUserSelectLabel(false)} \r\n                    onClick={ e => validateHandler(\"userSelect\", e.target.value)}\r\n                >\r\n                    <option className=\"option\"  value=\"DEFAULT\">{}</option>\r\n                        { allUsers && allUsers.map( (user, inx) => <option className=\"option\" key={inx}  value={user.email}>{user.email}</option> ) }\r\n                    </select>\r\n                {userSelect.error && <span className=\"error-valid\">{ leng === 'en' ? `${userSelect.error}` : 'בחר אפשרות' }</span>}\r\n            </div>\r\n\r\n            <div className=\"input-wrapper\">\r\n                <label className={authSelectLabel ? 'label-focus' : ''} htmlFor=\"authSelect\">{ leng === 'en' ? 'Permission' : 'הרשאות' }</label>\r\n                <select \r\n                    className=\"authSelect-select\" name=\"authSelect\"\r\n                    onBlur={ (e) => inputBlurHandler('authSelect',e.target.value)}\r\n                    onFocus={ () => setAuthSelectLabel(false)} \r\n                    onClick={ e => validateHandler(\"authSelect\", e.target.value)}\r\n                >\r\n                    <option className=\"option\"  value=\"DEFAULT\">{}</option>\r\n                        <option className=\"option\"  value=\"Basic\">Basic</option>\r\n                        <option className=\"option\"  value=\"Editor\">Editor</option>\r\n                        <option className=\"option\"  value=\"Administrator\">Administrator</option>\r\n                    </select>\r\n                {authSelect.error && <span className=\"error-valid\">{ leng === 'en' ? `${authSelect.error}` : 'בחר אפשרות' }</span>}\r\n            </div>\r\n\r\n            <div className=\"button-wrapper\">\r\n                <button \r\n                    className=\"submit\" \r\n                    type=\"submit\" \r\n                    disabled={\r\n                        userSelect.isValid  && authSelect.isValid \r\n                            ? false\r\n                            : true\r\n                    }\r\n                    >{ leng === 'en' ? 'Save' : 'שמור' }\r\n                </button>\r\n            </div>\r\n\r\n        </form>\r\n    </div>\r\n\r\n    )\r\n}\r\n\r\nexport default AdminPanel\r\n"]},"metadata":{},"sourceType":"module"}